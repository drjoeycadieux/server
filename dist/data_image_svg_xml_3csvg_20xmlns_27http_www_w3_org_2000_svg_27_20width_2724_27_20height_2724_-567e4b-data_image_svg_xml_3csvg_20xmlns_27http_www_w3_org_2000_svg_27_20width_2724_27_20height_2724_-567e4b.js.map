{"version":3,"file":"data_image_svg_xml_3csvg_20xmlns_27http_www_w3_org_2000_svg_27_20width_2724_27_20height_2724_-567e4b-data_image_svg_xml_3csvg_20xmlns_27http_www_w3_org_2000_svg_27_20width_2724_27_20height_2724_-567e4b.js?v=d9b9b9d7a013d2ef56e5","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA","sources":["webpack:///nextcloud/node_modules/@nextcloud/dialogs/dist/chunks/FilePicker-pvhGKHps.mjs"],"sourcesContent":["import { ref as u, onBeforeMount as X, onMounted as I, computed as c, defineComponent as P, watch as E, onUnmounted as Y, nextTick as ee, toRef as te } from \"vue\";\nimport { a as k, l as V, t as v } from \"./_plugin-vue2_normalizer-VrK6B12S.mjs\";\nimport { FileType as L, formatFileSize as ie, davRootPath as ne, davRemoteURL as se, davGetClient as H, davGetDefaultPropfind as M, getFavoriteNodes as le, davResultToNode as re, davGetRecentSearch as ae } from \"@nextcloud/files\";\nimport { getCanonicalLocale as oe } from \"@nextcloud/l10n\";\nimport { NcCheckboxRadioSwitch as O, NcDateTime as ce, NcButton as Z, NcActions as ue, NcActionInput as de, NcBreadcrumbs as fe, NcBreadcrumb as pe, NcIconSvgWrapper as _e, NcSelect as me, NcTextField as ve, NcDialog as ge, NcEmptyContent as ye } from \"@nextcloud/vue\";\nimport { loadState as j } from \"@nextcloud/initial-state\";\nimport { generateUrl as R, generateRemoteUrl as he } from \"@nextcloud/router\";\nimport { toValue as A } from \"@vueuse/core\";\nimport W from \"@nextcloud/axios\";\nimport { getCurrentUser as we } from \"@nextcloud/auth\";\nimport { Fragment as be } from \"vue-frag\";\nimport { mdiFolder as ke, mdiClock as Ce, mdiStar as Fe } from \"@mdi/js\";\nimport { emit as Se } from \"@nextcloud/event-bus\";\nimport { join as T } from \"path\";\nimport { CancelablePromise as U } from \"cancelable-promise\";\nconst $e = {\n  name: \"FileIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Ne = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon file-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, xe = [], Be = /* @__PURE__ */ k(\n  $e,\n  Ne,\n  xe,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst G = Be.exports, D = () => {\n  const l = () => document.getElementById(\"isPublic\")?.value === \"1\", e = u(!0);\n  return X(() => {\n    e.value = l();\n  }), {\n    isPublic: e\n  };\n};\n/**\n * @copyright Copyright (c) 2023 Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @author Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst K = () => {\n  const l = j(\"files\", \"config\", null), e = u(l?.show_hidden ?? !0), i = u(l?.sort_favorites_first ?? !0), t = u(l?.crop_image_previews ?? !0), { isPublic: n } = D();\n  return I(async () => {\n    if (n.value)\n      console.debug(\"Skip loading files settings - currently on public share\");\n    else\n      try {\n        const { data: s } = await W.get(R(\"/apps/files/api/v1/configs\"));\n        e.value = s?.data?.show_hidden ?? !1, i.value = s?.data?.sort_favorites_first ?? !0, t.value = s?.data?.crop_image_previews ?? !0;\n      } catch (s) {\n        console.error(\"Could not load files settings\", s), V(v(\"Could not load files settings\"));\n      }\n  }), {\n    showHiddenFiles: e,\n    sortFavoritesFirst: i,\n    cropImagePreviews: t\n  };\n}, Pe = (l) => {\n  const e = (a) => a === \"asc\" ? \"ascending\" : a === \"desc\" ? \"descending\" : \"none\", i = j(\"files\", \"viewConfigs\", null), t = u({\n    sortBy: i?.files?.sorting_mode ?? \"basename\",\n    order: e(i?.files?.sorting_direction ?? \"asc\")\n  }), n = u({\n    sortBy: i?.recent?.sorting_mode ?? \"basename\",\n    order: e(i?.recent?.sorting_direction ?? \"asc\")\n  }), s = u({\n    sortBy: i?.favorites?.sorting_mode ?? \"basename\",\n    order: e(i?.favorites?.sorting_direction ?? \"asc\")\n  }), { isPublic: r } = D();\n  I(async () => {\n    if (r.value)\n      console.debug(\"Skip loading files views - currently on public share\");\n    else\n      try {\n        const { data: a } = await W.get(R(\"/apps/files/api/v1/views\"));\n        t.value = {\n          sortBy: a?.data?.files?.sorting_mode ?? \"basename\",\n          order: e(a?.data?.files?.sorting_direction)\n        }, s.value = {\n          sortBy: a?.data?.favorites?.sorting_mode ?? \"basename\",\n          order: e(a?.data?.favorites?.sorting_direction)\n        }, n.value = {\n          sortBy: a?.data?.recent?.sorting_mode ?? \"basename\",\n          order: e(a?.data?.recent?.sorting_direction)\n        };\n      } catch (a) {\n        console.error(\"Could not load files views\", a), V(v(\"Could not load files views\"));\n      }\n  });\n  const b = c(() => A(l || \"files\") === \"files\" ? t.value : A(l) === \"recent\" ? n.value : s.value), g = c(() => b.value.sortBy), d = c(() => b.value.order);\n  return {\n    filesViewConfig: t,\n    favoritesViewConfig: s,\n    recentViewConfig: n,\n    currentConfig: b,\n    sortBy: g,\n    order: d\n  };\n}, ze = {\n  name: \"MenuUpIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Le = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon menu-up-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M7,15L12,10L17,15H7Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, Ie = [], Ve = /* @__PURE__ */ k(\n  ze,\n  Le,\n  Ie,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst Re = Ve.exports, De = {\n  name: \"MenuDownIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar He = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon menu-down-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M7,10L12,15L17,10H7Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, Me = [], Ae = /* @__PURE__ */ k(\n  De,\n  He,\n  Me,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst Te = Ae.exports, q = {\n  \"file-picker__file-icon\": \"_file-picker__file-icon_1vgv4_5\"\n}, Ue = /* @__PURE__ */ P({\n  __name: \"LoadingTableRow\",\n  props: {\n    showCheckbox: { type: Boolean }\n  },\n  setup(l) {\n    return { __sfc: !0, fileListIconStyles: q };\n  }\n});\nvar Ee = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(\"tr\", { staticClass: \"file-picker__row loading-row\", attrs: { \"aria-hidden\": \"true\" } }, [e.showCheckbox ? i(\"td\", { staticClass: \"row-checkbox\" }, [i(\"span\")]) : e._e(), i(\"td\", { staticClass: \"row-name\" }, [i(\"div\", { staticClass: \"row-wrapper\" }, [i(\"span\", { class: t.fileListIconStyles[\"file-picker__file-icon\"] }), i(\"span\")])]), e._m(0), e._m(1)]);\n}, Oe = [function() {\n  var l = this, e = l._self._c;\n  return l._self._setupProxy, e(\"td\", { staticClass: \"row-size\" }, [e(\"span\")]);\n}, function() {\n  var l = this, e = l._self._c;\n  return l._self._setupProxy, e(\"td\", { staticClass: \"row-modified\" }, [e(\"span\")]);\n}], Ze = /* @__PURE__ */ k(\n  Ue,\n  Ee,\n  Oe,\n  !1,\n  null,\n  \"6aded0d9\",\n  null,\n  null\n);\nconst je = Ze.exports;\n/**\n * @copyright Copyright (c) 2023 Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @author Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nfunction We(l, e = {}) {\n  e = { size: 32, cropPreview: !1, mimeFallback: !0, ...e };\n  try {\n    const i = l.attributes?.previewUrl || R(\"/core/preview?fileId={fileid}\", {\n      fileid: l.fileid\n    });\n    let t;\n    try {\n      t = new URL(i);\n    } catch {\n      t = new URL(i, window.location.origin);\n    }\n    return t.searchParams.set(\"x\", `${e.size}`), t.searchParams.set(\"y\", `${e.size}`), t.searchParams.set(\"mimeFallback\", `${e.mimeFallback}`), t.searchParams.set(\"a\", e.cropPreview === !0 ? \"0\" : \"1\"), t.searchParams.set(\"c\", `${l.attributes.etag}`), t;\n  } catch {\n    return null;\n  }\n}\nconst Ge = {\n  name: \"FolderIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Ke = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon folder-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, qe = [], Je = /* @__PURE__ */ k(\n  Ge,\n  Ke,\n  qe,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst J = Je.exports, Qe = {\n  name: \"FilePreview\"\n}, Xe = /* @__PURE__ */ P({\n  ...Qe,\n  props: {\n    node: null,\n    cropImagePreviews: { type: Boolean }\n  },\n  setup(l) {\n    const e = l, i = u(q), t = c(() => We(e.node, { cropPreview: e.cropImagePreviews })), n = c(() => e.node.type === L.File), s = u(!1);\n    return E(t, () => {\n      if (s.value = !1, t.value) {\n        const r = document.createElement(\"img\");\n        r.src = t.value.href, r.onerror = () => r.remove(), r.onload = () => {\n          s.value = !0, r.remove();\n        }, document.body.appendChild(r);\n      }\n    }, { immediate: !0 }), { __sfc: !0, fileListIconStyles: i, props: e, previewURL: t, isFile: n, canLoadPreview: s, IconFile: G, IconFolder: J };\n  }\n});\nvar Ye = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(\"div\", { class: t.fileListIconStyles[\"file-picker__file-icon\"], style: t.canLoadPreview ? { backgroundImage: `url(${t.previewURL})` } : void 0 }, [t.canLoadPreview ? e._e() : [t.isFile ? i(t.IconFile, { attrs: { size: 20 } }) : i(t.IconFolder, { attrs: { size: 20 } })]], 2);\n}, et = [], tt = /* @__PURE__ */ k(\n  Xe,\n  Ye,\n  et,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst it = tt.exports, nt = /* @__PURE__ */ P({\n  __name: \"FileListRow\",\n  props: {\n    allowPickDirectory: { type: Boolean },\n    selected: { type: Boolean },\n    showCheckbox: { type: Boolean },\n    canPick: { type: Boolean },\n    node: null,\n    cropImagePreviews: { type: Boolean }\n  },\n  emits: [\"update:selected\", \"enter-directory\"],\n  setup(l, { emit: e }) {\n    const i = l, t = c(() => i.node.attributes?.displayName || i.node.basename.slice(0, i.node.extension ? -i.node.extension.length : void 0)), n = c(() => i.node.extension), s = c(() => i.node.type === L.Folder), r = c(() => i.canPick && (i.allowPickDirectory || !s.value));\n    function b() {\n      e(\"update:selected\", !i.selected);\n    }\n    function g() {\n      s.value ? e(\"enter-directory\", i.node) : b();\n    }\n    function d(a) {\n      a.key === \"Enter\" && g();\n    }\n    return { __sfc: !0, props: i, emit: e, displayName: t, fileExtension: n, isDirectory: s, isPickable: r, toggleSelected: b, handleClick: g, handleKeyDown: d, formatFileSize: ie, NcCheckboxRadioSwitch: O, NcDateTime: ce, t: v, FilePreview: it };\n  }\n});\nvar st = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(\"tr\", e._g({ class: [\"file-picker__row\", {\n    \"file-picker__row--selected\": e.selected && !e.showCheckbox\n  }], attrs: { tabindex: e.showCheckbox && !t.isDirectory ? void 0 : 0, \"aria-selected\": t.isPickable ? e.selected : void 0, \"data-filename\": e.node.basename, \"data-testid\": \"file-list-row\" } }, {\n    click: t.handleClick,\n    /* same as tabindex -> if we hide the checkbox or this is a directory we need keyboard access to enter the directory or select the node */\n    ...!e.showCheckbox || t.isDirectory ? { keydown: t.handleKeyDown } : {}\n  }), [e.showCheckbox ? i(\"td\", { staticClass: \"row-checkbox\", on: { click: function(n) {\n    return n.stopPropagation(), (() => {\n    }).apply(null, arguments);\n  } } }, [i(t.NcCheckboxRadioSwitch, { attrs: { \"aria-label\": t.t(\"Select the row for {nodename}\", { nodename: t.displayName }), checked: e.selected, disabled: !t.isPickable, \"data-testid\": \"row-checkbox\" }, on: { \"update:checked\": t.toggleSelected } })], 1) : e._e(), i(\"td\", { staticClass: \"row-name\" }, [i(\"div\", { staticClass: \"file-picker__name-container\", attrs: { \"data-testid\": \"row-name\" } }, [i(t.FilePreview, { attrs: { node: e.node, \"crop-image-previews\": e.cropImagePreviews } }), i(\"div\", { staticClass: \"file-picker__file-name\", attrs: { title: t.displayName }, domProps: { textContent: e._s(t.displayName) } }), i(\"div\", { staticClass: \"file-picker__file-extension\", domProps: { textContent: e._s(t.fileExtension) } })], 1)]), i(\"td\", { staticClass: \"row-size\" }, [e._v(\" \" + e._s(t.formatFileSize(e.node.size || 0)) + \" \")]), i(\"td\", { staticClass: \"row-modified\" }, [i(t.NcDateTime, { attrs: { timestamp: e.node.mtime, \"ignore-seconds\": !0 } })], 1)]);\n}, lt = [], rt = /* @__PURE__ */ k(\n  nt,\n  st,\n  lt,\n  !1,\n  null,\n  \"48df4f27\",\n  null,\n  null\n);\nconst at = rt.exports, ot = /* @__PURE__ */ P({\n  __name: \"FileList\",\n  props: {\n    currentView: null,\n    multiselect: { type: Boolean },\n    allowPickDirectory: { type: Boolean },\n    loading: { type: Boolean },\n    files: null,\n    selectedFiles: null,\n    path: null\n  },\n  emits: [\"update:path\", \"update:selectedFiles\"],\n  setup(l, { emit: e }) {\n    const i = l, t = u(), { currentConfig: n } = Pe(i.currentView), s = c(() => t.value ?? n.value), r = c(() => s.value.sortBy === \"basename\" ? s.value.order === \"none\" ? void 0 : s.value.order : void 0), b = c(() => s.value.sortBy === \"size\" ? s.value.order === \"none\" ? void 0 : s.value.order : void 0), g = c(() => s.value.sortBy === \"mtime\" ? s.value.order === \"none\" ? void 0 : s.value.order : void 0), d = (o) => {\n      s.value.sortBy === o ? s.value.order === \"ascending\" ? t.value = { sortBy: s.value.sortBy, order: \"descending\" } : t.value = { sortBy: s.value.sortBy, order: \"ascending\" } : t.value = { sortBy: o, order: \"ascending\" };\n    }, { sortFavoritesFirst: a, cropImagePreviews: p } = K(), B = c(\n      () => {\n        const o = {\n          ascending: (m, f, z) => z(m, f),\n          descending: (m, f, z) => z(f, m),\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          none: (m, f, z) => 0\n        }, C = {\n          basename: (m, f) => (m.attributes?.displayName || m.basename).localeCompare(f.attributes?.displayName || f.basename, oe()),\n          size: (m, f) => (m.size || 0) - (f.size || 0),\n          // reverted because \"young\" is smaller than \"old\"\n          mtime: (m, f) => (f.mtime?.getTime?.() || 0) - (m.mtime?.getTime?.() || 0)\n        };\n        return [...i.files].sort(\n          (m, f) => (\n            // Folders always come above the files\n            (f.type === L.Folder ? 1 : 0) - (m.type === L.Folder ? 1 : 0) || (a ? (f.attributes.favorite ? 1 : 0) - (m.attributes.favorite ? 1 : 0) : 0) || o[s.value.order](m, f, C[s.value.sortBy])\n          )\n        );\n      }\n    ), F = c(() => i.files.filter((o) => i.allowPickDirectory || o.type !== L.Folder)), N = c(() => !i.loading && i.selectedFiles.length > 0 && i.selectedFiles.length >= F.value.length);\n    function h() {\n      i.selectedFiles.length < F.value.length ? e(\"update:selectedFiles\", F.value) : e(\"update:selectedFiles\", []);\n    }\n    function w(o) {\n      i.selectedFiles.includes(o) ? e(\"update:selectedFiles\", i.selectedFiles.filter((C) => C.path !== o.path)) : i.multiselect ? e(\"update:selectedFiles\", [...i.selectedFiles, o]) : e(\"update:selectedFiles\", [o]);\n    }\n    function S(o) {\n      e(\"update:path\", o.path);\n    }\n    const x = u(4), $ = u();\n    {\n      const o = () => ee(() => {\n        const C = $.value?.parentElement?.children || [];\n        let m = $.value?.parentElement?.clientHeight || 450;\n        for (let f = 0; f < C.length; f++)\n          $.value?.isSameNode(C[f]) || (m -= C[f].clientHeight);\n        x.value = Math.floor((m - 50) / 50);\n      });\n      I(() => {\n        window.addEventListener(\"resize\", o), o();\n      }), Y(() => {\n        window.removeEventListener(\"resize\", o);\n      });\n    }\n    return { __sfc: !0, props: i, emit: e, customSortingConfig: t, filesAppSorting: n, sortingConfig: s, sortByName: r, sortBySize: b, sortByModified: g, toggleSorting: d, sortFavoritesFirst: a, cropImagePreviews: p, sortedFiles: B, selectableFiles: F, allSelected: N, onSelectAll: h, onNodeSelected: w, onChangeDirectory: S, skeletonNumber: x, fileContainer: $, NcButton: Z, NcCheckboxRadioSwitch: O, t: v, IconSortAscending: Re, IconSortDescending: Te, LoadingTableRow: je, FileListRow: at };\n  }\n});\nvar ct = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(\"div\", { ref: \"fileContainer\", staticClass: \"file-picker__files\" }, [i(\"table\", [i(\"thead\", [i(\"tr\", [e.multiselect ? i(\"th\", { staticClass: \"row-checkbox\" }, [i(\"span\", { staticClass: \"hidden-visually\" }, [e._v(\" \" + e._s(t.t(\"Select entry\")) + \" \")]), e.multiselect ? i(t.NcCheckboxRadioSwitch, { attrs: { \"aria-label\": t.t(\"Select all entries\"), checked: t.allSelected, \"data-testid\": \"select-all-checkbox\" }, on: { \"update:checked\": t.onSelectAll } }) : e._e()], 1) : e._e(), i(\"th\", { staticClass: \"row-name\", attrs: { \"aria-sort\": t.sortByName } }, [i(\"div\", { staticClass: \"header-wrapper\" }, [i(\"span\", { staticClass: \"file-picker__header-preview\" }), i(t.NcButton, { attrs: { wide: !0, type: \"tertiary\", \"data-test\": \"file-picker_sort-name\" }, on: { click: function(n) {\n    return t.toggleSorting(\"basename\");\n  } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n    return [t.sortByName === \"ascending\" ? i(t.IconSortAscending, { attrs: { size: 20 } }) : t.sortByName === \"descending\" ? i(t.IconSortDescending, { attrs: { size: 20 } }) : i(\"span\", { staticStyle: { width: \"44px\" } })];\n  }, proxy: !0 }]) }, [e._v(\" \" + e._s(t.t(\"Name\")) + \" \")])], 1)]), i(\"th\", { staticClass: \"row-size\", attrs: { \"aria-sort\": t.sortBySize } }, [i(t.NcButton, { attrs: { wide: !0, type: \"tertiary\" }, on: { click: function(n) {\n    return t.toggleSorting(\"size\");\n  } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n    return [t.sortBySize === \"ascending\" ? i(t.IconSortAscending, { attrs: { size: 20 } }) : t.sortBySize === \"descending\" ? i(t.IconSortDescending, { attrs: { size: 20 } }) : i(\"span\", { staticStyle: { width: \"44px\" } })];\n  }, proxy: !0 }]) }, [e._v(\" \" + e._s(t.t(\"Size\")) + \" \")])], 1), i(\"th\", { staticClass: \"row-modified\", attrs: { \"aria-sort\": t.sortByModified } }, [i(t.NcButton, { attrs: { wide: !0, type: \"tertiary\" }, on: { click: function(n) {\n    return t.toggleSorting(\"mtime\");\n  } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n    return [t.sortByModified === \"ascending\" ? i(t.IconSortAscending, { attrs: { size: 20 } }) : t.sortByModified === \"descending\" ? i(t.IconSortDescending, { attrs: { size: 20 } }) : i(\"span\", { staticStyle: { width: \"44px\" } })];\n  }, proxy: !0 }]) }, [e._v(\" \" + e._s(t.t(\"Modified\")) + \" \")])], 1)])]), i(\"tbody\", [e.loading ? e._l(t.skeletonNumber, function(n) {\n    return i(t.LoadingTableRow, { key: n, attrs: { \"show-checkbox\": e.multiselect } });\n  }) : e._l(t.sortedFiles, function(n) {\n    return i(t.FileListRow, { key: n.fileid || n.path, attrs: { \"allow-pick-directory\": e.allowPickDirectory, \"show-checkbox\": e.multiselect, \"can-pick\": e.multiselect || e.selectedFiles.length === 0 || e.selectedFiles.includes(n), selected: e.selectedFiles.includes(n), node: n, \"crop-image-previews\": t.cropImagePreviews }, on: { \"update:selected\": function(s) {\n      return t.onNodeSelected(n);\n    }, \"enter-directory\": t.onChangeDirectory } });\n  })], 2)])]);\n}, ut = [], dt = /* @__PURE__ */ k(\n  ot,\n  ct,\n  ut,\n  !1,\n  null,\n  \"d3c94818\",\n  null,\n  null\n);\nconst ft = dt.exports, pt = {\n  name: \"HomeIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar _t = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon home-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, mt = [], vt = /* @__PURE__ */ k(\n  pt,\n  _t,\n  mt,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst gt = vt.exports, yt = {\n  name: \"PlusIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar ht = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon plus-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, wt = [], bt = /* @__PURE__ */ k(\n  yt,\n  ht,\n  wt,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst kt = bt.exports, Ct = /* @__PURE__ */ P({\n  __name: \"FilePickerBreadcrumbs\",\n  props: {\n    path: null,\n    showMenu: { type: Boolean }\n  },\n  emits: [\"update:path\", \"create-node\"],\n  setup(l, { emit: e }) {\n    const i = l, t = u(!1), n = u(\"\"), s = u();\n    function r() {\n      const d = n.value.trim(), a = s.value?.$el?.querySelector(\"input\");\n      let p = \"\";\n      return d.length === 0 ? p = v(\"Folder name cannot be empty.\") : d.includes(\"/\") ? p = v('\"/\" is not allowed inside a folder name.') : [\"..\", \".\"].includes(d) ? p = v('\"{name}\" is an invalid folder name.', { name: d }) : window.OC.config?.blacklist_files_regex && d.match(window.OC.config?.blacklist_files_regex) && (p = v('\"{name}\" is not an allowed folder name', { name: d })), a && a.setCustomValidity(p), p === \"\";\n    }\n    const b = function() {\n      const d = n.value.trim();\n      r() && (t.value = !1, e(\"create-node\", d), n.value = \"\");\n    }, g = c(\n      () => i.path.split(\"/\").filter((d) => d !== \"\").map((d, a, p) => ({\n        name: d,\n        path: \"/\" + p.slice(0, a + 1).join(\"/\")\n      }))\n    );\n    return { __sfc: !0, props: i, emit: e, actionsOpen: t, newNodeName: n, nameInput: s, validateInput: r, onSubmit: b, pathElements: g, IconFolder: J, IconHome: gt, IconPlus: kt, NcActions: ue, NcActionInput: de, NcBreadcrumbs: fe, NcBreadcrumb: pe, t: v };\n  }\n});\nvar Ft = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(t.NcBreadcrumbs, { staticClass: \"file-picker__breadcrumbs\", scopedSlots: e._u([{ key: \"default\", fn: function() {\n    return [i(t.NcBreadcrumb, { attrs: { name: t.t(\"All files\"), title: t.t(\"Home\") }, on: { click: function(n) {\n      return t.emit(\"update:path\", \"/\");\n    } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n      return [i(t.IconHome, { attrs: { size: 20 } })];\n    }, proxy: !0 }]) }), e._l(t.pathElements, function(n) {\n      return i(t.NcBreadcrumb, { key: n.path, attrs: { name: n.name, title: n.path }, on: { click: function(s) {\n        return t.emit(\"update:path\", n.path);\n      } } });\n    })];\n  }, proxy: !0 }, e.showMenu ? { key: \"actions\", fn: function() {\n    return [i(t.NcActions, { attrs: { \"aria-label\": t.t(\"Create directory\"), \"force-menu\": !0, \"force-name\": !0, \"menu-name\": t.t(\"New\"), open: t.actionsOpen, type: \"secondary\" }, on: { \"update:open\": function(n) {\n      t.actionsOpen = n;\n    }, close: function(n) {\n      t.newNodeName = \"\";\n    } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n      return [i(t.IconPlus, { attrs: { size: 20 } })];\n    }, proxy: !0 }], null, !1, 2971667417) }, [i(t.NcActionInput, { ref: \"nameInput\", attrs: { value: t.newNodeName, label: t.t(\"New folder\"), placeholder: t.t(\"New folder name\") }, on: { \"update:value\": function(n) {\n      t.newNodeName = n;\n    }, submit: t.onSubmit, input: t.validateInput }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n      return [i(t.IconFolder, { attrs: { size: 20 } })];\n    }, proxy: !0 }], null, !1, 1614167509) })], 1)];\n  }, proxy: !0 } : null], null, !0) });\n}, St = [], $t = /* @__PURE__ */ k(\n  Ct,\n  Ft,\n  St,\n  !1,\n  null,\n  \"22cbb5df\",\n  null,\n  null\n);\nconst Nt = $t.exports, xt = {\n  name: \"CloseIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Bt = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon close-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, Pt = [], zt = /* @__PURE__ */ k(\n  xt,\n  Bt,\n  Pt,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst Lt = zt.exports, It = {\n  name: \"MagnifyIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nvar Vt = function() {\n  var e = this, i = e._self._c;\n  return i(\"span\", e._b({ staticClass: \"material-design-icon magnify-icon\", attrs: { \"aria-hidden\": e.title ? null : !0, \"aria-label\": e.title, role: \"img\" }, on: { click: function(t) {\n    return e.$emit(\"click\", t);\n  } } }, \"span\", e.$attrs, !1), [i(\"svg\", { staticClass: \"material-design-icon__svg\", attrs: { fill: e.fillColor, width: e.size, height: e.size, viewBox: \"0 0 24 24\" } }, [i(\"path\", { attrs: { d: \"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\" } }, [e.title ? i(\"title\", [e._v(e._s(e.title))]) : e._e()])])]);\n}, Rt = [], Dt = /* @__PURE__ */ k(\n  It,\n  Vt,\n  Rt,\n  !1,\n  null,\n  null,\n  null,\n  null\n);\nconst Ht = Dt.exports;\n/**\n * @copyright Copyright (c) 2024 Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @author Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst Mt = (l) => {\n  const e = [\n    {\n      id: \"files\",\n      label: v(\"All files\"),\n      icon: ke\n    },\n    {\n      id: \"recent\",\n      label: v(\"Recent\"),\n      icon: Ce\n    },\n    {\n      id: \"favorites\",\n      label: v(\"Favorites\"),\n      icon: Fe\n    }\n  ], i = l.value ? e.filter(({ id: t }) => t === \"files\") : e;\n  return {\n    allViews: e,\n    availableViews: i\n  };\n}, At = /* @__PURE__ */ P({\n  __name: \"FilePickerNavigation\",\n  props: {\n    currentView: null,\n    filterString: null,\n    isCollapsed: { type: Boolean },\n    disabledNavigation: { type: Boolean }\n  },\n  emits: [\"update:currentView\", \"update:filterString\"],\n  setup(l, { emit: e }) {\n    const i = l, { availableViews: t } = Mt(u(we() === null)), n = c(() => t.filter((r) => r.id === i.currentView)[0] ?? t[0]);\n    return { __sfc: !0, props: i, emit: e, availableViews: t, currentViewObject: n, updateFilterValue: (r) => e(\"update:filterString\", r), IconClose: Lt, IconMagnify: Ht, NcButton: Z, NcIconSvgWrapper: _e, NcSelect: me, NcTextField: ve, Fragment: be, t: v };\n  }\n});\nvar Tt = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(t.Fragment, [i(t.NcTextField, { staticClass: \"file-picker__filter-input\", attrs: { value: e.filterString, label: t.t(\"Filter file list\"), \"show-trailing-button\": !!e.filterString }, on: { \"update:value\": t.updateFilterValue, \"trailing-button-click\": function(n) {\n    return t.updateFilterValue(\"\");\n  } }, scopedSlots: e._u([{ key: \"trailing-button-icon\", fn: function() {\n    return [i(t.IconClose, { attrs: { size: 16 } })];\n  }, proxy: !0 }]) }, [i(t.IconMagnify, { attrs: { size: 16 } })], 1), t.availableViews.length > 1 && !e.disabledNavigation ? [e.isCollapsed ? i(t.NcSelect, { attrs: { \"aria-label\": t.t(\"Current view selector\"), clearable: !1, searchable: !1, options: t.availableViews, value: t.currentViewObject }, on: { input: (n) => t.emit(\"update:currentView\", n.id) } }) : i(\"ul\", { staticClass: \"file-picker__side\" }, e._l(t.availableViews, function(n) {\n    return i(\"li\", { key: n.id }, [i(t.NcButton, { attrs: { type: e.currentView === n.id ? \"primary\" : \"tertiary\", wide: !0 }, on: { click: function(s) {\n      return e.$emit(\"update:currentView\", n.id);\n    } }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n      return [i(t.NcIconSvgWrapper, { attrs: { path: n.icon, size: 20 } })];\n    }, proxy: !0 }], null, !0) }, [e._v(\" \" + e._s(n.label) + \" \")])], 1);\n  }), 0)] : e._e()], 2);\n}, Ut = [], Et = /* @__PURE__ */ k(\n  At,\n  Tt,\n  Ut,\n  !1,\n  null,\n  \"a06474d4\",\n  null,\n  null\n);\nconst Ot = Et.exports;\n/**\n * @copyright Copyright (c) 2023 Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @author Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nconst Zt = function(l, e, i) {\n  const t = c(() => i.value ? \"/\" : ne), n = c(() => i.value ? he(\"webdav\").replace(\"/remote.php\", \"/public.php\") : se), s = c(() => {\n    if (i.value) {\n      const h = document.getElementById(\"sharingToken\").value, w = btoa(`${h}:null`);\n      return H(n.value, {\n        Authorization: `Basic ${w}`\n      });\n    }\n    return H();\n  }), r = (h) => re(h, t.value, n.value), b = () => {\n    const h = new AbortController(), w = Math.round(Date.now() / 1e3) - 60 * 60 * 24 * 14;\n    return new U(async (S, x, $) => {\n      $(() => h.abort());\n      try {\n        const { data: o } = await s.value.search(\"/\", {\n          signal: h.signal,\n          details: !0,\n          data: ae(w)\n        }), C = o.results.map(r);\n        S(C);\n      } catch (o) {\n        x(o);\n      }\n    });\n  }, g = () => {\n    const h = new AbortController();\n    return new U(async (w, S, x) => {\n      x(() => h.abort());\n      try {\n        let o = (await s.value.getDirectoryContents(`${t.value}${e.value}`, {\n          signal: h.signal,\n          details: !0,\n          data: M()\n        })).data.map(r);\n        i.value && (o = o.filter((C) => C.path !== e.value)), w(o);\n      } catch ($) {\n        S($);\n      }\n    });\n  }, d = u([]), a = u(!0), p = u(null);\n  async function B(h) {\n    const w = T(e.value, h);\n    await s.value.createDirectory(T(t.value, w));\n    const S = await F(w);\n    return d.value.push(S), S;\n  }\n  async function F(h, w = void 0) {\n    w = w ?? t.value;\n    const { data: S } = await s.value.stat(`${w}${h}`, {\n      details: !0,\n      data: M()\n    });\n    return r(S);\n  }\n  async function N() {\n    p.value && p.value.cancel(), a.value = !0, l.value === \"favorites\" ? p.value = le(s.value, e.value, t.value) : l.value === \"recent\" ? p.value = b() : p.value = g(), d.value = await p.value, p.value = null, a.value = !1;\n  }\n  return E([l, e], () => N()), I(() => N()), {\n    isLoading: a,\n    files: d,\n    loadFiles: N,\n    getFile: F,\n    createDirectory: B\n  };\n};\n/**\n * @copyright Copyright (c) 2023 Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @author Ferdinand Thiessen <opensource@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nconst jt = function(l) {\n  const e = c(() => l.value.map((t) => t.split(\"/\")));\n  return {\n    isSupportedMimeType: (t) => {\n      const n = t.split(\"/\");\n      return e.value.some(\n        ([s, r]) => (\n          // check mime type matches or is wildcard\n          (n[0] === s || s === \"*\") && (n[1] === r || r === \"*\")\n        )\n      );\n    }\n  };\n}, Wt = {\n  name: \"FilePicker\"\n}, Gt = /* @__PURE__ */ P({\n  ...Wt,\n  props: {\n    buttons: null,\n    name: null,\n    allowPickDirectory: { type: Boolean, default: !1 },\n    disabledNavigation: { type: Boolean, default: !1 },\n    container: { default: \"body\" },\n    filterFn: { default: void 0 },\n    mimetypeFilter: { default: () => [] },\n    multiselect: { type: Boolean, default: !0 },\n    path: { default: void 0 }\n  },\n  emits: [\"close\"],\n  setup(l, { emit: e }) {\n    const i = l, { isPublic: t } = D(), n = u(!0), s = c(() => (typeof i.buttons == \"function\" ? i.buttons(a.value, F.value, g.value) : i.buttons).map((y) => ({\n      ...y,\n      callback: () => {\n        r = !0, b(y.callback);\n      }\n    })));\n    let r = !1;\n    const b = async (_) => {\n      const y = a.value.length === 0 && i.allowPickDirectory ? [await $(F.value)] : a.value;\n      _(y), e(\"close\", y), r = !1;\n    }, g = u(\"files\"), d = c(() => g.value === \"favorites\" ? v(\"Favorites\") : g.value === \"recent\" ? v(\"Recent\") : \"\"), a = u([]), p = u(window?.sessionStorage.getItem(\"NC.FilePicker.LastPath\") || \"/\"), B = u(), F = c({\n      // Only use the path for the files view as favorites and recent only works on the root\n      get: () => g.value === \"files\" ? B.value || i.path || p.value : \"/\",\n      /**\n       * Navigate to the new path and save it to the session storage\n       *\n       * @param path The new path\n       */\n      set: (_) => {\n        i.path === void 0 && window.sessionStorage.setItem(\"NC.FilePicker.LastPath\", _), B.value = _, a.value = [];\n      }\n    }), N = u(\"\"), { isSupportedMimeType: h } = jt(te(i, \"mimetypeFilter\")), { files: w, isLoading: S, loadFiles: x, getFile: $, createDirectory: o } = Zt(g, F, t);\n    I(() => x());\n    const { showHiddenFiles: C } = K(), m = c(() => {\n      let _ = w.value;\n      return C.value || (_ = _.filter((y) => !y.basename.startsWith(\".\"))), i.mimetypeFilter.length > 0 && (_ = _.filter((y) => y.type === \"folder\" || y.mime && h(y.mime))), N.value && (_ = _.filter((y) => y.basename.toLowerCase().includes(N.value.toLowerCase()))), i.filterFn && (_ = _.filter((y) => i.filterFn(y))), _;\n    }), f = c(() => g.value === \"files\" ? v(\"Upload some content or sync with your devices!\") : g.value === \"recent\" ? v(\"Files and folders you recently modified will show up here.\") : v(\"Files and folders you mark as favorite will show up here.\"));\n    return { __sfc: !0, props: i, emit: e, isPublic: t, isOpen: n, dialogButtons: s, isHandlingCallback: r, handleButtonClick: b, currentView: g, viewHeadline: d, selectedFiles: a, savedPath: p, navigatedPath: B, currentPath: F, filterString: N, isSupportedMimeType: h, files: w, isLoading: S, loadFiles: x, getFile: $, createDirectory: o, showHiddenFiles: C, filteredFiles: m, noFilesDescription: f, onCreateFolder: async (_) => {\n      try {\n        const y = await o(_);\n        F.value = y.path, Se(\"files:node:created\", w.value.filter((Q) => Q.basename === _)[0]);\n      } catch (y) {\n        console.warn(\"Could not create new folder\", { name: _, error: y }), V(v(\"Could not create the new folder\"));\n      }\n    }, handleClose: (_) => {\n      !_ && !r && e(\"close\");\n    }, IconFile: G, FileList: ft, FilePickerBreadcrumbs: Nt, FilePickerNavigation: Ot, NcDialog: ge, NcEmptyContent: ye, t: v };\n  }\n});\nvar Kt = function() {\n  var e = this, i = e._self._c, t = e._self._setupProxy;\n  return i(t.NcDialog, { attrs: { container: e.container, buttons: t.dialogButtons, name: e.name, size: \"large\", \"content-classes\": \"file-picker__content\", \"dialog-classes\": \"file-picker\", \"navigation-classes\": \"file-picker__navigation\", open: t.isOpen }, on: { \"update:open\": [function(n) {\n    t.isOpen = n;\n  }, t.handleClose] }, scopedSlots: e._u([{ key: \"navigation\", fn: function({ isCollapsed: n }) {\n    return [i(t.FilePickerNavigation, { attrs: { \"is-collapsed\": n, \"current-view\": t.currentView, \"filter-string\": t.filterString, \"disabled-navigation\": e.disabledNavigation }, on: { \"update:currentView\": function(s) {\n      t.currentView = s;\n    }, \"update:current-view\": function(s) {\n      t.currentView = s;\n    }, \"update:filterString\": function(s) {\n      t.filterString = s;\n    }, \"update:filter-string\": function(s) {\n      t.filterString = s;\n    } } })];\n  } }]) }, [i(\"div\", { staticClass: \"file-picker__main\" }, [t.currentView === \"files\" ? i(t.FilePickerBreadcrumbs, { attrs: { path: t.currentPath, \"show-menu\": e.allowPickDirectory }, on: { \"update:path\": function(n) {\n    t.currentPath = n;\n  }, \"create-node\": t.onCreateFolder } }) : i(\"div\", { staticClass: \"file-picker__view\" }, [i(\"h3\", [e._v(e._s(t.viewHeadline))])]), t.isLoading || t.filteredFiles.length > 0 ? i(t.FileList, { attrs: { \"allow-pick-directory\": e.allowPickDirectory, \"current-view\": t.currentView, files: t.filteredFiles, multiselect: e.multiselect, loading: t.isLoading, path: t.currentPath, \"selected-files\": t.selectedFiles, name: t.viewHeadline }, on: { \"update:path\": [function(n) {\n    t.currentPath = n;\n  }, function(n) {\n    t.currentView = \"files\";\n  }], \"update:selectedFiles\": function(n) {\n    t.selectedFiles = n;\n  }, \"update:selected-files\": function(n) {\n    t.selectedFiles = n;\n  } } }) : t.filterString ? i(t.NcEmptyContent, { attrs: { name: t.t(\"No matching files\"), description: t.t(\"No files matching your filter were found.\") }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n    return [i(t.IconFile)];\n  }, proxy: !0 }]) }) : i(t.NcEmptyContent, { attrs: { name: t.t(\"No files in here\"), description: t.noFilesDescription }, scopedSlots: e._u([{ key: \"icon\", fn: function() {\n    return [i(t.IconFile)];\n  }, proxy: !0 }]) })], 1)]);\n}, qt = [], Jt = /* @__PURE__ */ k(\n  Gt,\n  Kt,\n  qt,\n  !1,\n  null,\n  \"6ff1b36b\",\n  null,\n  null\n);\nconst pi = Jt.exports;\nexport {\n  pi as default\n};\n"],"names":[],"sourceRoot":""}