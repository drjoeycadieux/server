{"version":3,"file":"theming-admin-theming.mjs","sources":["../apps/theming/src/mixins/admin/FieldMixin.js","../apps/theming/src/mixins/admin/TextValueMixin.js","../apps/theming/src/components/admin/CheckboxField.vue","../apps/theming/src/components/admin/ColorPickerField.vue","../apps/theming/src/components/admin/FileInputField.vue","../apps/theming/src/components/admin/TextField.vue","../apps/theming/src/components/admin/AppMenuSection.vue","../apps/theming/src/AdminTheming.vue","../apps/theming/src/admin-settings.js"],"sourcesContent":["/**\n * @copyright 2022 Christopher Ng <chrng8@gmail.com>\n *\n * @author Christopher Ng <chrng8@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nconst styleRefreshFields = [\n\t'color',\n\t'logo',\n\t'background',\n\t'logoheader',\n\t'favicon',\n\t'disable-user-theming',\n]\n\nexport default {\n\temits: [\n\t\t'update:theming',\n\t],\n\n\tdata() {\n\t\treturn {\n\t\t\tshowSuccess: false,\n\t\t\terrorMessage: '',\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tid() {\n\t\t\treturn `admin-theming-${this.name}`\n\t\t},\n\t},\n\n\tmethods: {\n\t\treset() {\n\t\t\tthis.showSuccess = false\n\t\t\tthis.errorMessage = ''\n\t\t},\n\n\t\thandleSuccess() {\n\t\t\tthis.showSuccess = true\n\t\t\tsetTimeout(() => { this.showSuccess = false }, 2000)\n\t\t\tif (styleRefreshFields.includes(this.name)) {\n\t\t\t\tthis.$emit('update:theming')\n\t\t\t}\n\t\t},\n\t},\n}\n","/**\n * @copyright 2022 Christopher Ng <chrng8@gmail.com>\n *\n * @author Christopher Ng <chrng8@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nimport FieldMixin from './FieldMixin.js'\n\nexport default {\n\tmixins: [\n\t\tFieldMixin,\n\t],\n\n\twatch: {\n\t\tvalue(value) {\n\t\t\tthis.localValue = value\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tlocalValue: this.value,\n\t\t}\n\t},\n\n\tmethods: {\n\t\tasync save() {\n\t\t\tthis.reset()\n\t\t\tconst url = generateUrl('/apps/theming/ajax/updateStylesheet')\n\t\t\t// Convert boolean to string as server expects string value\n\t\t\tconst valueToPost = this.localValue === true ? 'yes' : this.localValue === false ? 'no' : this.localValue\n\t\t\ttry {\n\t\t\t\tawait axios.post(url, {\n\t\t\t\t\tsetting: this.name,\n\t\t\t\t\tvalue: valueToPost,\n\t\t\t\t})\n\t\t\t\tthis.$emit('update:value', this.localValue)\n\t\t\t\tthis.handleSuccess()\n\t\t\t} catch (e) {\n\t\t\t\tthis.errorMessage = e.response.data.data?.message\n\t\t\t}\n\t\t},\n\n\t\tasync undo() {\n\t\t\tthis.reset()\n\t\t\tconst url = generateUrl('/apps/theming/ajax/undoChanges')\n\t\t\ttry {\n\t\t\t\tawait axios.post(url, {\n\t\t\t\t\tsetting: this.name,\n\t\t\t\t})\n\t\t\t\tthis.$emit('update:value', this.defaultValue)\n\t\t\t\tthis.handleSuccess()\n\t\t\t} catch (e) {\n\t\t\t\tthis.errorMessage = e.response.data.data?.message\n\t\t\t}\n\t\t},\n\t},\n}\n","<!--\n  - @copyright 2022 Christopher Ng <chrng8@gmail.com>\n  -\n  - @author Christopher Ng <chrng8@gmail.com>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n-->\n\n<template>\n\t<div class=\"field\">\n\t\t<label :for=\"id\">{{ displayName }}</label>\n\t\t<div class=\"field__row\">\n\t\t\t<NcCheckboxRadioSwitch type=\"switch\"\n\t\t\t\t:id=\"id\"\n\t\t\t\t:checked.sync=\"localValue\"\n\t\t\t\t@update:checked=\"save\">\n\t\t\t\t{{ label }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t</div>\n\n\t\t<p class=\"field__description\">{{ description }}</p>\n\n\t\t<NcNoteCard v-if=\"errorMessage\"\n\t\t\ttype=\"error\"\n\t\t\t:show-alert=\"true\">\n\t\t\t<p>{{ errorMessage }}</p>\n\t\t</NcNoteCard>\n\t</div>\n</template>\n\n<script>\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/dist/Components/NcCheckboxRadioSwitch.js'\nimport NcNoteCard from '@nextcloud/vue/dist/Components/NcNoteCard.js'\n\nimport TextValueMixin from '../../mixins/admin/TextValueMixin.js'\n\nexport default {\n\tname: 'CheckboxField',\n\n\tcomponents: {\n\t\tNcCheckboxRadioSwitch,\n\t\tNcNoteCard,\n\t},\n\n\tmixins: [\n\t\tTextValueMixin,\n\t],\n\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultValue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './shared/field.scss';\n\n.field {\n\t&__description {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n</style>\n","<!--\n  - @copyright 2022 Christopher Ng <chrng8@gmail.com>\n  -\n  - @author Christopher Ng <chrng8@gmail.com>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n-->\n\n<template>\n\t<div class=\"field\">\n\t\t<label :for=\"id\">{{ displayName }}</label>\n\t\t<div class=\"field__row\">\n\t\t\t<NcColorPicker :value.sync=\"localValue\"\n\t\t\t\t:advanced-fields=\"true\"\n\t\t\t\tdata-admin-theming-setting-primary-color-picker\n\t\t\t\t@update:value=\"debounceSave\">\n\t\t\t\t<NcButton type=\"secondary\"\n\t\t\t\t\t:id=\"id\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Palette :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('theming', 'Change color') }}\n\t\t\t\t</NcButton>\n\t\t\t</NcColorPicker>\n\t\t\t<div class=\"field__color-preview\" data-admin-theming-setting-primary-color />\n\t\t\t<NcButton v-if=\"value !== defaultValue\"\n\t\t\t\ttype=\"tertiary\"\n\t\t\t\t:aria-label=\"t('theming', 'Reset to default')\"\n\t\t\t\tdata-admin-theming-setting-primary-color-reset\n\t\t\t\t@click=\"undo\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Undo :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t</div>\n\n\t\t<NcNoteCard v-if=\"errorMessage\"\n\t\t\ttype=\"error\"\n\t\t\t:show-alert=\"true\">\n\t\t\t<p>{{ errorMessage }}</p>\n\t\t</NcNoteCard>\n\t</div>\n</template>\n\n<script>\nimport { debounce } from 'debounce'\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcColorPicker from '@nextcloud/vue/dist/Components/NcColorPicker.js'\nimport NcNoteCard from '@nextcloud/vue/dist/Components/NcNoteCard.js'\nimport Undo from 'vue-material-design-icons/UndoVariant.vue'\nimport Palette from 'vue-material-design-icons/Palette.vue'\n\nimport TextValueMixin from '../../mixins/admin/TextValueMixin.js'\n\nexport default {\n\tname: 'ColorPickerField',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tNcColorPicker,\n\t\tNcNoteCard,\n\t\tUndo,\n\t\tPalette,\n\t},\n\n\tmixins: [\n\t\tTextValueMixin,\n\t],\n\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultValue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tmethods: {\n\t\tdebounceSave: debounce(async function() {\n\t\t\tawait this.save()\n\t\t}, 200),\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './shared/field.scss';\n\n.field {\n\t&__color-preview {\n\t\twidth: var(--default-clickable-area);\n\t\tborder-radius: var(--border-radius-large);\n\t\tbackground-color: var(--color-primary-default);\n\t}\n}\n</style>\n","<!--\n  - @copyright 2022 Christopher Ng <chrng8@gmail.com>\n  -\n  - @author Christopher Ng <chrng8@gmail.com>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n-->\n\n<template>\n\t<div class=\"field\">\n\t\t<label :for=\"id\">{{ displayName }}</label>\n\t\t<div class=\"field__row\">\n\t\t\t<NcButton type=\"secondary\"\n\t\t\t\t:id=\"id\"\n\t\t\t\t:aria-label=\"ariaLabel\"\n\t\t\t\tdata-admin-theming-setting-file-picker\n\t\t\t\t@click=\"activateLocalFilePicker\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Upload :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('theming', 'Upload') }}\n\t\t\t</NcButton>\n\t\t\t<NcButton v-if=\"showReset\"\n\t\t\t\ttype=\"tertiary\"\n\t\t\t\t:aria-label=\"t('theming', 'Reset to default')\"\n\t\t\t\tdata-admin-theming-setting-file-reset\n\t\t\t\t@click=\"undo\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Undo :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcButton v-if=\"showRemove\"\n\t\t\t\ttype=\"tertiary\"\n\t\t\t\t:aria-label=\"t('theming', 'Remove background image')\"\n\t\t\t\tdata-admin-theming-setting-file-remove\n\t\t\t\t@click=\"removeBackground\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Delete :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcLoadingIcon v-if=\"showLoading\"\n\t\t\t\tclass=\"field__loading-icon\"\n\t\t\t\t:size=\"20\" />\n\t\t</div>\n\n\t\t<div v-if=\"(name === 'logoheader' || name === 'favicon') && mimeValue !== defaultMimeValue\"\n\t\t\tclass=\"field__preview\"\n\t\t\t:class=\"{\n\t\t\t\t'field__preview--logoheader': name === 'logoheader',\n\t\t\t\t'field__preview--favicon': name === 'favicon',\n\t\t\t}\" />\n\n\t\t<NcNoteCard v-if=\"errorMessage\"\n\t\t\ttype=\"error\"\n\t\t\t:show-alert=\"true\">\n\t\t\t<p>{{ errorMessage }}</p>\n\t\t</NcNoteCard>\n\n\t\t<input ref=\"input\"\n\t\t\t:accept=\"acceptMime\"\n\t\t\ttype=\"file\"\n\t\t\t@change=\"onChange\">\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\nimport { loadState } from '@nextcloud/initial-state'\n\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcLoadingIcon from '@nextcloud/vue/dist/Components/NcLoadingIcon.js'\nimport NcNoteCard from '@nextcloud/vue/dist/Components/NcNoteCard.js'\nimport Delete from 'vue-material-design-icons/Delete.vue'\nimport Undo from 'vue-material-design-icons/UndoVariant.vue'\nimport Upload from 'vue-material-design-icons/Upload.vue'\n\nimport FieldMixin from '../../mixins/admin/FieldMixin.js'\n\nconst {\n\tallowedMimeTypes,\n} = loadState('theming', 'adminThemingParameters', {})\n\nexport default {\n\tname: 'FileInputField',\n\n\tcomponents: {\n\t\tDelete,\n\t\tNcButton,\n\t\tNcLoadingIcon,\n\t\tNcNoteCard,\n\t\tUndo,\n\t\tUpload,\n\t},\n\n\tmixins: [\n\t\tFieldMixin,\n\t],\n\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmimeName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmimeValue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultMimeValue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tariaLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tshowLoading: false,\n\t\t\tacceptMime: (allowedMimeTypes[this.name]\n\t\t\t\t|| ['image/jpeg', 'image/png', 'image/gif', 'image/webp']).join(','),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tshowReset() {\n\t\t\treturn this.mimeValue !== this.defaultMimeValue\n\t\t},\n\n\t\tshowRemove() {\n\t\t\tif (this.name === 'background') {\n\t\t\t\tif (this.mimeValue.startsWith('image/')) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t\tif (this.mimeValue === this.defaultMimeValue) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t},\n\n\tmethods: {\n\t\tactivateLocalFilePicker() {\n\t\t\tthis.reset()\n\t\t\t// Set to null so that selecting the same file will trigger the change event\n\t\t\tthis.$refs.input.value = null\n\t\t\tthis.$refs.input.click()\n\t\t},\n\n\t\tasync onChange(e) {\n\t\t\tconst file = e.target.files[0]\n\n\t\t\tconst formData = new FormData()\n\t\t\tformData.append('key', this.name)\n\t\t\tformData.append('image', file)\n\n\t\t\tconst url = generateUrl('/apps/theming/ajax/uploadImage')\n\t\t\ttry {\n\t\t\t\tthis.showLoading = true\n\t\t\t\tawait axios.post(url, formData)\n\t\t\t\tthis.showLoading = false\n\t\t\t\tthis.$emit('update:mime-value', file.type)\n\t\t\t\tthis.handleSuccess()\n\t\t\t} catch (e) {\n\t\t\t\tthis.showLoading = false\n\t\t\t\tthis.errorMessage = e.response.data.data?.message\n\t\t\t}\n\t\t},\n\n\t\tasync undo() {\n\t\t\tthis.reset()\n\t\t\tconst url = generateUrl('/apps/theming/ajax/undoChanges')\n\t\t\ttry {\n\t\t\t\tawait axios.post(url, {\n\t\t\t\t\tsetting: this.mimeName,\n\t\t\t\t})\n\t\t\t\tthis.$emit('update:mime-value', this.defaultMimeValue)\n\t\t\t\tthis.handleSuccess()\n\t\t\t} catch (e) {\n\t\t\t\tthis.errorMessage = e.response.data.data?.message\n\t\t\t}\n\t\t},\n\n\t\tasync removeBackground() {\n\t\t\tthis.reset()\n\t\t\tconst url = generateUrl('/apps/theming/ajax/updateStylesheet')\n\t\t\ttry {\n\t\t\t\tawait axios.post(url, {\n\t\t\t\t\tsetting: this.mimeName,\n\t\t\t\t\tvalue: 'backgroundColor',\n\t\t\t\t})\n\t\t\t\tthis.$emit('update:mime-value', 'backgroundColor')\n\t\t\t\tthis.handleSuccess()\n\t\t\t} catch (e) {\n\t\t\t\tthis.errorMessage = e.response.data.data?.message\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './shared/field.scss';\n\n.field {\n\t&__loading-icon {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t}\n\n\t&__preview {\n\t\twidth: 70px;\n\t\theight: 70px;\n\t\tbackground-size: contain;\n\t\tbackground-position: center;\n\t\tbackground-repeat: no-repeat;\n\t\tmargin: 10px 0;\n\n\t\t&--logoheader {\n\t\t\tbackground-image: var(--image-logoheader);\n\t\t}\n\n\t\t&--favicon {\n\t\t\tbackground-image: var(--image-favicon);\n\t\t}\n\t}\n}\n\ninput[type=\"file\"] {\n\tdisplay: none;\n}\n</style>\n","<!--\n  - @copyright 2022 Christopher Ng <chrng8@gmail.com>\n  -\n  - @author Christopher Ng <chrng8@gmail.com>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n-->\n\n<template>\n\t<div class=\"field\">\n\t\t<NcTextField :value.sync=\"localValue\"\n\t\t\t:label=\"displayName\"\n\t\t\t:placeholder=\"placeholder\"\n\t\t\t:type=\"type\"\n\t\t\t:maxlength=\"maxlength\"\n\t\t\t:spellcheck=\"false\"\n\t\t\t:success=\"showSuccess\"\n\t\t\t:error=\"Boolean(errorMessage)\"\n\t\t\t:helper-text=\"errorMessage\"\n\t\t\t:show-trailing-button=\"value !== defaultValue\"\n\t\t\ttrailing-button-icon=\"undo\"\n\t\t\t@trailing-button-click=\"undo\"\n\t\t\t@keydown.enter=\"save\"\n\t\t\t@blur=\"save\" />\n\t</div>\n</template>\n\n<script>\nimport NcTextField from '@nextcloud/vue/dist/Components/NcTextField.js'\n\nimport TextValueMixin from '../../mixins/admin/TextValueMixin.js'\n\nexport default {\n\tname: 'TextField',\n\n\tcomponents: {\n\t\tNcTextField,\n\t},\n\n\tmixins: [\n\t\tTextValueMixin,\n\t],\n\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultValue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmaxlength: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.field {\n\tmax-width: 400px;\n}\n</style>\n","<template>\n\t<NcSettingsSection :name=\"t('theming', 'Navigation bar settings')\">\n\t\t<h3>{{ t('theming', 'Default app') }}</h3>\n\t\t<p class=\"info-note\">\n\t\t\t{{ t('theming', 'The default app is the app that is e.g. opened after login or when the logo in the menu is clicked.') }}\n\t\t</p>\n\n\t\t<NcCheckboxRadioSwitch :checked.sync=\"hasCustomDefaultApp\" type=\"switch\" data-cy-switch-default-app=\"\">\n\t\t\t{{ t('theming', 'Use custom default app') }}\n\t\t</NcCheckboxRadioSwitch>\n\n\t\t<template v-if=\"hasCustomDefaultApp\">\n\t\t\t<h4>{{ t('theming', 'Global default app') }}</h4>\n\t\t\t<NcSelect v-model=\"selectedApps\"\n\t\t\t\t:close-on-select=\"false\"\n\t\t\t\t:placeholder=\"t('theming', 'Global default apps')\"\n\t\t\t\t:options=\"allApps\"\n\t\t\t\t:multiple=\"true\" />\n\t\t\t<h5>{{ t('theming', 'Default app priority') }}</h5>\n\t\t\t<p class=\"info-note\">\n\t\t\t\t{{ t('theming', 'If an app is not enabled for a user, the next app with lower priority is used.') }}\n\t\t\t</p>\n\t\t\t<AppOrderSelector :value.sync=\"selectedApps\" />\n\t\t</template>\n\t</NcSettingsSection>\n</template>\n\n<script lang=\"ts\">\nimport { showError } from '@nextcloud/dialogs'\nimport { loadState } from '@nextcloud/initial-state'\nimport { translate as t } from '@nextcloud/l10n'\nimport { generateUrl } from '@nextcloud/router'\nimport { computed, defineComponent } from 'vue'\n\nimport axios from '@nextcloud/axios'\n\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/dist/Components/NcCheckboxRadioSwitch.js'\nimport NcSelect from '@nextcloud/vue/dist/Components/NcSelect.js'\nimport NcSettingsSection from '@nextcloud/vue/dist/Components/NcSettingsSection.js'\nimport AppOrderSelector from '../AppOrderSelector.vue'\n\nexport default defineComponent({\n\tname: 'AppMenuSection',\n\tcomponents: {\n\t\tAppOrderSelector,\n\t\tNcCheckboxRadioSwitch,\n\t\tNcSelect,\n\t\tNcSettingsSection,\n\t},\n\tprops: {\n\t\tdefaultApps: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: {\n\t\t'update:defaultApps': (value: string[]) => Array.isArray(value) && value.every((id) => typeof id === 'string'),\n\t},\n\tsetup(props, { emit }) {\n\t\tconst hasCustomDefaultApp = computed({\n\t\t\tget: () => props.defaultApps.length > 0,\n\t\t\tset: (checked: boolean) => {\n\t\t\t\tif (checked) {\n\t\t\t\t\temit('update:defaultApps', ['dashboard', 'files'])\n\t\t\t\t} else {\n\t\t\t\t\tselectedApps.value = []\n\t\t\t\t}\n\t\t\t},\n\t\t})\n\n\t\t/**\n\t\t * All enabled apps which can be navigated\n\t\t */\n\t\tconst allApps = Object.values(\n\t\t\tloadState<Record<string, { id: string, name?: string, icon: string }>>('core', 'apps'),\n\t\t).map(({ id, name, icon }) => ({ label: name, id, icon }))\n\n\t\t/**\n\t\t * Currently selected app, wrapps the setter\n\t\t */\n\t\tconst selectedApps = computed({\n\t\t\tget: () => props.defaultApps.map((id) => allApps.filter(app => app.id === id)[0]),\n\t\t\tset(value) {\n\t\t\t\tsaveSetting('defaultApps', value.map(app => app.id))\n\t\t\t\t\t.then(() => emit('update:defaultApps', value.map(app => app.id)))\n\t\t\t\t\t.catch(() => showError(t('theming', 'Could not set global default apps')))\n\t\t\t},\n\t\t})\n\n\t\tconst saveSetting = async (key: string, value: unknown) => {\n\t\t\tconst url = generateUrl('/apps/theming/ajax/updateAppMenu')\n\t\t\treturn await axios.put(url, {\n\t\t\t\tsetting: key,\n\t\t\t\tvalue,\n\t\t\t})\n\t\t}\n\n\t\treturn {\n\t\t\tallApps,\n\t\t\tselectedApps,\n\t\t\thasCustomDefaultApp,\n\n\t\t\tt,\n\t\t}\n\t},\n})\n</script>\n\n<style scoped lang=\"scss\">\nh3, h4 {\n\tfont-weight: bold;\n}\nh4, h5 {\n\tmargin-block-start: 12px;\n}\n\n.info-note {\n\tcolor: var(--color-text-maxcontrast);\n}\n</style>\n","<!--\n  - @copyright 2022 Christopher Ng <chrng8@gmail.com>\n  -\n  - @author Christopher Ng <chrng8@gmail.com>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n-->\n\n<template>\n\t<section>\n\t\t<NcSettingsSection :name=\"t('theming', 'Theming')\"\n\t\t\t:description=\"t('theming', 'Theming makes it possible to easily customize the look and feel of your instance and supported clients. This will be visible for all users.')\"\n\t\t\t:doc-url=\"docUrl\"\n\t\t\tdata-admin-theming-settings>\n\t\t\t<div class=\"admin-theming\">\n\t\t\t\t<NcNoteCard v-if=\"!isThemable\"\n\t\t\t\t\ttype=\"error\"\n\t\t\t\t\t:show-alert=\"true\">\n\t\t\t\t\t<p>{{ notThemableErrorMessage }}</p>\n\t\t\t\t</NcNoteCard>\n\n\t\t\t\t<!-- Name, web link, slogan... fields -->\n\t\t\t\t<TextField v-for=\"field in textFields\"\n\t\t\t\t\t:key=\"field.name\"\n\t\t\t\t\t:data-admin-theming-setting-field=\"field.name\"\n\t\t\t\t\t:default-value=\"field.defaultValue\"\n\t\t\t\t\t:display-name=\"field.displayName\"\n\t\t\t\t\t:maxlength=\"field.maxlength\"\n\t\t\t\t\t:name=\"field.name\"\n\t\t\t\t\t:placeholder=\"field.placeholder\"\n\t\t\t\t\t:type=\"field.type\"\n\t\t\t\t\t:value.sync=\"field.value\"\n\t\t\t\t\t@update:theming=\"$emit('update:theming')\" />\n\n\t\t\t\t<!-- Primary color picker -->\n\t\t\t\t<ColorPickerField :name=\"colorPickerField.name\"\n\t\t\t\t\t:default-value=\"colorPickerField.defaultValue\"\n\t\t\t\t\t:display-name=\"colorPickerField.displayName\"\n\t\t\t\t\t:value.sync=\"colorPickerField.value\"\n\t\t\t\t\t@update:theming=\"$emit('update:theming')\" />\n\n\t\t\t\t<!-- Default background picker -->\n\t\t\t\t<FileInputField v-for=\"field in fileInputFields\"\n\t\t\t\t\t:key=\"field.name\"\n\t\t\t\t\t:aria-label=\"field.ariaLabel\"\n\t\t\t\t\t:data-admin-theming-setting-file=\"field.name\"\n\t\t\t\t\t:default-mime-value=\"field.defaultMimeValue\"\n\t\t\t\t\t:display-name=\"field.displayName\"\n\t\t\t\t\t:mime-name=\"field.mimeName\"\n\t\t\t\t\t:mime-value.sync=\"field.mimeValue\"\n\t\t\t\t\t:name=\"field.name\"\n\t\t\t\t\t@update:theming=\"$emit('update:theming')\" />\n\t\t\t\t<div class=\"admin-theming__preview\" data-admin-theming-preview>\n\t\t\t\t\t<div class=\"admin-theming__preview-logo\" data-admin-theming-preview-logo />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</NcSettingsSection>\n\t\t<NcSettingsSection :name=\"t('theming', 'Advanced options')\">\n\t\t\t<div class=\"admin-theming-advanced\">\n\t\t\t\t<TextField v-for=\"field in advancedTextFields\"\n\t\t\t\t\t:key=\"field.name\"\n\t\t\t\t\t:name=\"field.name\"\n\t\t\t\t\t:value.sync=\"field.value\"\n\t\t\t\t\t:default-value=\"field.defaultValue\"\n\t\t\t\t\t:type=\"field.type\"\n\t\t\t\t\t:display-name=\"field.displayName\"\n\t\t\t\t\t:placeholder=\"field.placeholder\"\n\t\t\t\t\t:maxlength=\"field.maxlength\"\n\t\t\t\t\t@update:theming=\"$emit('update:theming')\" />\n\t\t\t\t<FileInputField v-for=\"field in advancedFileInputFields\"\n\t\t\t\t\t:key=\"field.name\"\n\t\t\t\t\t:name=\"field.name\"\n\t\t\t\t\t:mime-name=\"field.mimeName\"\n\t\t\t\t\t:mime-value.sync=\"field.mimeValue\"\n\t\t\t\t\t:default-mime-value=\"field.defaultMimeValue\"\n\t\t\t\t\t:display-name=\"field.displayName\"\n\t\t\t\t\t:aria-label=\"field.ariaLabel\"\n\t\t\t\t\t@update:theming=\"$emit('update:theming')\" />\n\t\t\t\t<CheckboxField :name=\"userThemingField.name\"\n\t\t\t\t\t:value=\"userThemingField.value\"\n\t\t\t\t\t:default-value=\"userThemingField.defaultValue\"\n\t\t\t\t\t:display-name=\"userThemingField.displayName\"\n\t\t\t\t\t:label=\"userThemingField.label\"\n\t\t\t\t\t:description=\"userThemingField.description\"\n\t\t\t\t\tdata-admin-theming-setting-disable-user-theming\n\t\t\t\t\t@update:theming=\"$emit('update:theming')\" />\n\t\t\t\t<a v-if=\"!canThemeIcons\"\n\t\t\t\t\t:href=\"docUrlIcons\"\n\t\t\t\t\trel=\"noreferrer noopener\">\n\t\t\t\t\t<em>{{ t('theming', 'Install the ImageMagick PHP extension with support for SVG images to automatically generate favicons based on the uploaded logo and color.') }}</em>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</NcSettingsSection>\n\t\t<AppMenuSection :default-apps.sync=\"defaultApps\" />\n\t</section>\n</template>\n\n<script>\nimport { loadState } from '@nextcloud/initial-state'\n\nimport NcNoteCard from '@nextcloud/vue/dist/Components/NcNoteCard.js'\nimport NcSettingsSection from '@nextcloud/vue/dist/Components/NcSettingsSection.js'\nimport CheckboxField from './components/admin/CheckboxField.vue'\nimport ColorPickerField from './components/admin/ColorPickerField.vue'\nimport FileInputField from './components/admin/FileInputField.vue'\nimport TextField from './components/admin/TextField.vue'\nimport AppMenuSection from './components/admin/AppMenuSection.vue'\n\nconst {\n\tbackgroundMime,\n\tcanThemeIcons,\n\tcolor,\n\tdocUrl,\n\tdocUrlIcons,\n\tfaviconMime,\n\tisThemable,\n\tlegalNoticeUrl,\n\tlogoheaderMime,\n\tlogoMime,\n\tname,\n\tnotThemableErrorMessage,\n\tprivacyPolicyUrl,\n\tslogan,\n\turl,\n\tuserThemingDisabled,\n\tdefaultApps,\n} = loadState('theming', 'adminThemingParameters')\n\nconst textFields = [\n\t{\n\t\tname: 'name',\n\t\tvalue: name,\n\t\tdefaultValue: 'Nextcloud',\n\t\ttype: 'text',\n\t\tdisplayName: t('theming', 'Name'),\n\t\tplaceholder: t('theming', 'Name'),\n\t\tmaxlength: 250,\n\t},\n\t{\n\t\tname: 'url',\n\t\tvalue: url,\n\t\tdefaultValue: 'https://nextcloud.com',\n\t\ttype: 'url',\n\t\tdisplayName: t('theming', 'Web link'),\n\t\tplaceholder: 'https://…',\n\t\tmaxlength: 500,\n\t},\n\t{\n\t\tname: 'slogan',\n\t\tvalue: slogan,\n\t\tdefaultValue: t('theming', 'a safe home for all your data'),\n\t\ttype: 'text',\n\t\tdisplayName: t('theming', 'Slogan'),\n\t\tplaceholder: t('theming', 'Slogan'),\n\t\tmaxlength: 500,\n\t},\n]\n\nconst colorPickerField = {\n\tname: 'color',\n\tvalue: color,\n\tdefaultValue: '#0082c9',\n\tdisplayName: t('theming', 'Color'),\n}\n\nconst fileInputFields = [\n\t{\n\t\tname: 'logo',\n\t\tmimeName: 'logoMime',\n\t\tmimeValue: logoMime,\n\t\tdefaultMimeValue: '',\n\t\tdisplayName: t('theming', 'Logo'),\n\t\tariaLabel: t('theming', 'Upload new logo'),\n\t},\n\t{\n\t\tname: 'background',\n\t\tmimeName: 'backgroundMime',\n\t\tmimeValue: backgroundMime,\n\t\tdefaultMimeValue: '',\n\t\tdisplayName: t('theming', 'Background and login image'),\n\t\tariaLabel: t('theming', 'Upload new background and login image'),\n\t},\n]\n\nconst advancedTextFields = [\n\t{\n\t\tname: 'imprintUrl',\n\t\tvalue: legalNoticeUrl,\n\t\tdefaultValue: '',\n\t\ttype: 'url',\n\t\tdisplayName: t('theming', 'Legal notice link'),\n\t\tplaceholder: 'https://…',\n\t\tmaxlength: 500,\n\t},\n\t{\n\t\tname: 'privacyUrl',\n\t\tvalue: privacyPolicyUrl,\n\t\tdefaultValue: '',\n\t\ttype: 'url',\n\t\tdisplayName: t('theming', 'Privacy policy link'),\n\t\tplaceholder: 'https://…',\n\t\tmaxlength: 500,\n\t},\n]\n\nconst advancedFileInputFields = [\n\t{\n\t\tname: 'logoheader',\n\t\tmimeName: 'logoheaderMime',\n\t\tmimeValue: logoheaderMime,\n\t\tdefaultMimeValue: '',\n\t\tdisplayName: t('theming', 'Header logo'),\n\t\tariaLabel: t('theming', 'Upload new header logo'),\n\t},\n\t{\n\t\tname: 'favicon',\n\t\tmimeName: 'faviconMime',\n\t\tmimeValue: faviconMime,\n\t\tdefaultMimeValue: '',\n\t\tdisplayName: t('theming', 'Favicon'),\n\t\tariaLabel: t('theming', 'Upload new favicon'),\n\t},\n]\n\nconst userThemingField = {\n\tname: 'disable-user-theming',\n\tvalue: userThemingDisabled,\n\tdefaultValue: false,\n\tdisplayName: t('theming', 'User settings'),\n\tlabel: t('theming', 'Disable user theming'),\n\tdescription: t('theming', 'Although you can select and customize your instance, users can change their background and colors. If you want to enforce your customization, you can toggle this on.'),\n}\n\nexport default {\n\tname: 'AdminTheming',\n\n\tcomponents: {\n\t\tAppMenuSection,\n\t\tCheckboxField,\n\t\tColorPickerField,\n\t\tFileInputField,\n\t\tNcNoteCard,\n\t\tNcSettingsSection,\n\t\tTextField,\n\t},\n\n\temits: [\n\t\t'update:theming',\n\t],\n\n\ttextFields,\n\n\tdata() {\n\t\treturn {\n\t\t\ttextFields,\n\t\t\tcolorPickerField,\n\t\t\tfileInputFields,\n\t\t\tadvancedTextFields,\n\t\t\tadvancedFileInputFields,\n\t\t\tuserThemingField,\n\t\t\tdefaultApps,\n\n\t\t\tcanThemeIcons,\n\t\t\tdocUrl,\n\t\t\tdocUrlIcons,\n\t\t\tisThemable,\n\t\t\tnotThemableErrorMessage,\n\t\t}\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.admin-theming,\n.admin-theming-advanced {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 8px 0;\n}\n\n.admin-theming {\n\t&__preview {\n\t\twidth: 230px;\n\t\theight: 140px;\n\t\tbackground-size: cover;\n\t\tbackground-position: center;\n\t\ttext-align: center;\n\t\tmargin-top: 10px;\n\t\t/* This is basically https://github.com/nextcloud/server/blob/master/core/css/guest.css\n\t\t   But without the user variables. That way the admin can preview the render as guest*/\n\t\t/* As guest, there is no user color color-background-plain */\n\t\tbackground-color: var(--color-primary-element-default);\n\t\t/* As guest, there is no user background (--image-background)\n\t\t1. Empty background if defined\n\t\t2. Else default background\n\t\t3. Finally default gradient (should not happened, the background is always defined anyway) */\n\t\tbackground-image: var(--image-background-plain, var(--image-background-default));\n\n\t\t&-logo {\n\t\t\twidth: 20%;\n\t\t\theight: 20%;\n\t\t\tmargin-top: 20px;\n\t\t\tdisplay: inline-block;\n\t\t\tbackground-size: contain;\n\t\t\tbackground-position: center;\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tbackground-image: var(--image-logo, url('../../../core/img/logo/logo.svg'));\n\t\t}\n\t}\n}\n</style>\n","/**\n * @copyright 2022 Christopher Ng <chrng8@gmail.com>\n *\n * @author Christopher Ng <chrng8@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport Vue from 'vue'\n\nimport { refreshStyles } from './helpers/refreshStyles.js'\nimport App from './AdminTheming.vue'\n\nVue.prototype.OC = OC\nVue.prototype.t = t\n\nconst View = Vue.extend(App)\nconst theming = new View()\ntheming.$mount('#admin-theming')\ntheming.$on('update:theming', refreshStyles)\n"],"names":["styleRefreshFields","FieldMixin","TextValueMixin","value","url","generateUrl","valueToPost","axios","e","_a","_sfc_main","NcCheckboxRadioSwitch","NcNoteCard","NcButton","NcColorPicker","Undo","Palette","debounce","allowedMimeTypes","loadState","Delete","NcLoadingIcon","Upload","file","formData","NcTextField","_sfc_main$1","defineComponent","AppOrderSelector","NcSelect","NcSettingsSection","id","props","emit","hasCustomDefaultApp","computed","checked","selectedApps","allApps","name","icon","app","saveSetting","showError","t","key","backgroundMime","canThemeIcons","color","docUrl","docUrlIcons","faviconMime","isThemable","legalNoticeUrl","logoheaderMime","logoMime","notThemableErrorMessage","privacyPolicyUrl","slogan","userThemingDisabled","defaultApps","textFields","colorPickerField","fileInputFields","advancedTextFields","advancedFileInputFields","userThemingField","AppMenuSection","CheckboxField","ColorPickerField","FileInputField","TextField","Vue","View","App","theming","refreshStyles"],"mappings":"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"}