/*! third party licenses: dist/vendor.LICENSE.txt */
var jt=Object.defineProperty;var xt=(n,t,e)=>t in n?jt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var y=(n,t,e)=>(xt(n,typeof t!="symbol"?t+"":t,e),e);import{c as St,h as Et}from"./index-Dizl7-P2.mjs";import{c2 as Pt,c9 as $t,c8 as Mt,bW as ot,bV as T}from"../core-common.mjs";import{u as At}from"./util-MKsKVvMG.mjs";import"./json2xml-BD0x8Z3S.mjs";const Rt=function(){return Pt("dav/comments")},it=St(Rt()),J=n=>{it.setHeaders({"X-Requested-With":"XMLHttpRequest",requesttoken:n!=null?n:""})};Mt(J),J($t());var Lt=at;function at(n,t,e){n instanceof RegExp&&(n=K(n,e)),t instanceof RegExp&&(t=K(t,e));var r=ct(n,t,e);return r&&{start:r[0],end:r[1],pre:e.slice(0,r[0]),body:e.slice(r[0]+n.length,r[1]),post:e.slice(r[1]+t.length)}}function K(n,t){var e=t.match(n);return e?e[0]:null}at.range=ct;function ct(n,t,e){var r,o,s,i,a,c=e.indexOf(n),p=e.indexOf(t,c+1),l=c;if(c>=0&&p>0){if(n===t)return[c,p];for(r=[],s=e.length;l>=0&&!a;)l==c?(r.push(l),c=e.indexOf(n,l+1)):r.length==1?a=[r.pop(),p]:(o=r.pop(),o<s&&(s=o,i=p),p=e.indexOf(t,l+1)),l=c<p&&c>=0?c:p;r.length&&(a=[s,i])}return a}var lt=Lt,Wt=Tt,pt="\0SLASH"+Math.random()+"\0",ht="\0OPEN"+Math.random()+"\0",X="\0CLOSE"+Math.random()+"\0",ut="\0COMMA"+Math.random()+"\0",ft="\0PERIOD"+Math.random()+"\0";function B(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function Ct(n){return n.split("\\\\").join(pt).split("\\{").join(ht).split("\\}").join(X).split("\\,").join(ut).split("\\.").join(ft)}function Nt(n){return n.split(pt).join("\\").split(ht).join("{").split(X).join("}").split(ut).join(",").split(ft).join(".")}function gt(n){if(!n)return[""];var t=[],e=lt("{","}",n);if(!e)return n.split(",");var r=e.pre,o=e.body,s=e.post,i=r.split(",");i[i.length-1]+="{"+o+"}";var a=gt(s);return s.length&&(i[i.length-1]+=a.shift(),i.push.apply(i,a)),t.push.apply(t,i),t}function Tt(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),W(Ct(n),!0).map(Nt)):[]}function _t(n){return"{"+n+"}"}function kt(n){return/^-?0\d/.test(n)}function zt(n,t){return n<=t}function It(n,t){return n>=t}function W(n,t){var e=[],r=lt("{","}",n);if(!r)return[n];var o=r.pre,s=r.post.length?W(r.post,!1):[""];if(/\$$/.test(r.pre))for(var i=0;i<s.length;i++){var a=o+"{"+r.body+"}"+s[i];e.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),p=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),l=c||p,u=r.body.indexOf(",")>=0;if(!l&&!u)return r.post.match(/,.*\}/)?(n=r.pre+"{"+r.body+X+r.post,W(n)):[n];var h;if(l)h=r.body.split(/\.\./);else if(h=gt(r.body),h.length===1&&(h=W(h[0],!1).map(_t),h.length===1))return s.map(function(j){return r.pre+h[0]+j});var m;if(l){var g=B(h[0]),O=B(h[1]),M=Math.max(h[0].length,h[1].length),b=h.length==3?Math.abs(B(h[2])):1,E=zt,F=O<g;F&&(b*=-1,E=It);var f=h.some(kt);m=[];for(var d=g;E(d,O);d+=b){var v;if(p)v=String.fromCharCode(d),v==="\\"&&(v="");else if(v=String(d),f){var R=M-v.length;if(R>0){var x=new Array(R+1).join("0");d<0?v="-"+x+v.slice(1):v=x+v}}m.push(v)}}else{m=[];for(var $=0;$<h.length;$++)m.push.apply(m,W(h[$],!1))}for(var $=0;$<m.length;$++)for(var i=0;i<s.length;i++){var a=o+m[$]+s[i];(!t||l||a)&&e.push(a)}}return e}const Ft=ot(Wt),Gt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},L=n=>n.replace(/[[\]\\-]/g,"\\$&"),Bt=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Q=n=>n.join(""),Dt=(n,t)=>{const e=t;if(n.charAt(e)!=="[")throw new Error("not in a brace expression");const r=[],o=[];let s=e+1,i=!1,a=!1,c=!1,p=!1,l=e,u="";t:for(;s<n.length;){const g=n.charAt(s);if((g==="!"||g==="^")&&s===e+1){p=!0,s++;continue}if(g==="]"&&i&&!c){l=s+1;break}if(i=!0,g==="\\"&&!c){c=!0,s++;continue}if(g==="["&&!c){for(const[O,[M,b,E]]of Object.entries(Gt))if(n.startsWith(O,s)){if(u)return["$.",!1,n.length-e,!0];s+=O.length,E?o.push(M):r.push(M),a=a||b;continue t}}if(c=!1,u){g>u?r.push(L(u)+"-"+L(g)):g===u&&r.push(L(g)),u="",s++;continue}if(n.startsWith("-]",s+1)){r.push(L(g+"-")),s+=2;continue}if(n.startsWith("-",s+1)){u=g,s+=2;continue}r.push(L(g)),s++}if(l<s)return["",!1,0,!1];if(!r.length&&!o.length)return["$.",!1,n.length-e,!0];if(o.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!p){const g=r[0].length===2?r[0].slice(-1):r[0];return[Bt(g),!1,l-e,!1]}const h="["+(p?"^":"")+Q(r)+"]",m="["+(p?"":"^")+Q(o)+"]";return[r.length&&o.length?"("+h+"|"+m+")":r.length?h:m,a,l-e,!0]},Zt=(n,{windowsPathsNoEscape:t=!1}={})=>t?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&"),qt=(n,{windowsPathsNoEscape:t=!1}={})=>t?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var D={};const S=(n,t,e={})=>(k(t),!e.nocomment&&t.charAt(0)==="#"?!1:new I(t,e).match(n)),Ht=/^\*+([^+@!?\*\[\(]*)$/,Vt=n=>t=>!t.startsWith(".")&&t.endsWith(n),Xt=n=>t=>t.endsWith(n),Ut=n=>(n=n.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(n)),Jt=n=>(n=n.toLowerCase(),t=>t.toLowerCase().endsWith(n)),Kt=/^\*+\.\*+$/,Qt=n=>!n.startsWith(".")&&n.includes("."),Yt=n=>n!=="."&&n!==".."&&n.includes("."),te=/^\.\*+$/,ee=n=>n!=="."&&n!==".."&&n.startsWith("."),ne=/^\*+$/,re=n=>n.length!==0&&!n.startsWith("."),se=n=>n.length!==0&&n!=="."&&n!=="..",oe=/^\?+([^+@!?\*\[\(]*)?$/,ie=([n,t=""])=>{const e=dt([n]);return t?(t=t.toLowerCase(),r=>e(r)&&r.toLowerCase().endsWith(t)):e},ae=([n,t=""])=>{const e=mt([n]);return t?(t=t.toLowerCase(),r=>e(r)&&r.toLowerCase().endsWith(t)):e},ce=([n,t=""])=>{const e=mt([n]);return t?r=>e(r)&&r.endsWith(t):e},le=([n,t=""])=>{const e=dt([n]);return t?r=>e(r)&&r.endsWith(t):e},dt=([n])=>{const t=n.length;return e=>e.length===t&&!e.startsWith(".")},mt=([n])=>{const t=n.length;return e=>e.length===t&&e!=="."&&e!==".."},bt=typeof T=="object"&&T?typeof D=="object"&&D&&D.__MINIMATCH_TESTING_PLATFORM__||T.platform:"posix",Y={win32:{sep:"\\"},posix:{sep:"/"}},pe=bt==="win32"?Y.win32.sep:Y.posix.sep;S.sep=pe;const P=Symbol("globstar **");S.GLOBSTAR=P;const tt={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},q="[^/]",Z=q+"*?",he="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ue="(?:(?!(?:\\/|^)\\.).)*?",wt=n=>n.split("").reduce((t,e)=>(t[e]=!0,t),{}),fe=wt("().*{}+?[]^$\\!"),ge=wt("[.("),de=(n,t={})=>e=>S(e,n,t);S.filter=de;const A=(n,t={})=>Object.assign({},n,t),me=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return S;const t=S;return Object.assign((e,r,o={})=>t(e,r,A(n,o)),{Minimatch:class extends t.Minimatch{constructor(e,r={}){super(e,A(n,r))}static defaults(e){return t.defaults(A(n,e)).Minimatch}},unescape:(e,r={})=>t.unescape(e,A(n,r)),escape:(e,r={})=>t.escape(e,A(n,r)),filter:(e,r={})=>t.filter(e,A(n,r)),defaults:e=>t.defaults(A(n,e)),makeRe:(e,r={})=>t.makeRe(e,A(n,r)),braceExpand:(e,r={})=>t.braceExpand(e,A(n,r)),match:(e,r,o={})=>t.match(e,r,A(n,o)),sep:t.sep,GLOBSTAR:P})};S.defaults=me;const yt=(n,t={})=>(k(n),t.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:Ft(n));S.braceExpand=yt;const be=1024*64,k=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>be)throw new TypeError("pattern is too long")},we=(n,t={})=>new I(n,t).makeRe();S.makeRe=we;const ye=(n,t,e={})=>{const r=new I(t,e);return n=n.filter(o=>r.match(o)),r.options.nonull&&!n.length&&n.push(t),n};S.match=ye;const ve=n=>n.replace(/\\(.)/g,"$1"),et=/[?*]|[+@!]\(.*?\)|\[|\]/,nt=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class I{constructor(t,e={}){y(this,"options");y(this,"set");y(this,"pattern");y(this,"windowsPathsNoEscape");y(this,"nonegate");y(this,"negate");y(this,"comment");y(this,"empty");y(this,"preserveMultipleSlashes");y(this,"partial");y(this,"globSet");y(this,"globParts");y(this,"nocase");y(this,"isWindows");y(this,"platform");y(this,"windowsNoMagicRoot");y(this,"regexp");k(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||bt,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);const r=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let o=this.globParts.map((s,i,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){const c=s[0]===""&&s[1]===""&&(s[2]==="?"||!et.test(s[2]))&&!et.test(s[3]),p=/^[a-z]:/i.test(s[0]);if(c)return[...s.slice(0,4),...s.slice(4).map(l=>this.parse(l))];if(p)return[s[0],...s.slice(1).map(l=>this.parse(l))]}return s.map(c=>this.parse(c))});if(this.debug(this.pattern,o),this.set=o.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){const i=this.set[s];i[0]===""&&i[1]===""&&this.globParts[s][2]==="?"&&typeof i[3]=="string"&&/^[a-z]:$/i.test(i[3])&&(i[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let r=0;r<t.length;r++)for(let o=0;o<t[r].length;o++)t[r][o]==="**"&&(t[r][o]="*");const{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let r=-1;for(;(r=e.indexOf("**",r+1))!==-1;){let o=r;for(;e[o+1]==="**";)o++;o!==r&&e.splice(r,o-r)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((r,o)=>{const s=r[r.length-1];return o==="**"&&s==="**"?r:o===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(r.pop(),r):(r.push(o),r)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let o=1;o<t.length-1;o++){const s=t[o];o===1&&s===""&&t[0]===""||(s==="."||s==="")&&(e=!0,t.splice(o,1),o--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let r=0;for(;(r=t.indexOf("..",r+1))!==-1;){const o=t[r-1];o&&o!=="."&&o!==".."&&o!=="**"&&(e=!0,t.splice(r-1,2),r-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let r of t){let o=-1;for(;(o=r.indexOf("**",o+1))!==-1;){let i=o;for(;r[i+1]==="**";)i++;i>o&&r.splice(o+1,i-o);let a=r[o+1];const c=r[o+2],p=r[o+3];if(a!==".."||!c||c==="."||c===".."||!p||p==="."||p==="..")continue;e=!0,r.splice(o,1);const l=r.slice(0);l[o]="**",t.push(l),o--}if(!this.preserveMultipleSlashes){for(let i=1;i<r.length-1;i++){const a=r[i];i===1&&a===""&&r[0]===""||(a==="."||a==="")&&(e=!0,r.splice(i,1),i--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(e=!0,r.pop())}let s=0;for(;(s=r.indexOf("..",s+1))!==-1;){const i=r[s-1];if(i&&i!=="."&&i!==".."&&i!=="**"){e=!0;const a=s===1&&r[s+1]==="**"?["."]:[];r.splice(s-1,2,...a),r.length===0&&r.push(""),s-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let r=e+1;r<t.length;r++){const o=this.partsMatch(t[e],t[r],!this.preserveMultipleSlashes);o&&(t[e]=o,t[r]=[])}return t.filter(e=>e.length)}partsMatch(t,e,r=!1){let o=0,s=0,i=[],a="";for(;o<t.length&&s<e.length;)if(t[o]===e[s])i.push(a==="b"?e[s]:t[o]),o++,s++;else if(r&&t[o]==="**"&&e[s]===t[o+1])i.push(t[o]),o++;else if(r&&e[s]==="**"&&t[o]===e[s+1])i.push(e[s]),s++;else if(t[o]==="*"&&e[s]&&(this.options.dot||!e[s].startsWith("."))&&e[s]!=="**"){if(a==="b")return!1;a="a",i.push(t[o]),o++,s++}else if(e[s]==="*"&&t[o]&&(this.options.dot||!t[o].startsWith("."))&&t[o]!=="**"){if(a==="a")return!1;a="b",i.push(e[s]),o++,s++}else return!1;return t.length===e.length&&i}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=!1,r=0;for(let o=0;o<t.length&&t.charAt(o)==="!";o++)e=!e,r++;r&&(this.pattern=t.slice(r)),this.negate=e}matchOne(t,e,r=!1){const o=this.options;if(this.isWindows){const O=t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),M=e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]);if(O&&M){const b=t[3],E=e[3];b.toLowerCase()===E.toLowerCase()&&(t[3]=E)}else if(M&&typeof t[0]=="string"){const b=e[3],E=t[0];b.toLowerCase()===E.toLowerCase()&&(e[3]=E,e=e.slice(3))}else if(O&&typeof e[0]=="string"){const b=t[3];b.toLowerCase()===e[0].toLowerCase()&&(e[0]=b,t=t.slice(3))}}const{optimizationLevel:s=1}=this.options;s>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,a=0,c=t.length,p=e.length;i<c&&a<p;i++,a++){this.debug("matchOne loop");var l=e[a],u=t[i];if(this.debug(e,l,u),l===!1)return!1;if(l===P){this.debug("GLOBSTAR",[e,l,u]);var h=i,m=a+1;if(m===p){for(this.debug("** at the end");i<c;i++)if(t[i]==="."||t[i]===".."||!o.dot&&t[i].charAt(0)===".")return!1;return!0}for(;h<c;){var g=t[h];if(this.debug("\nglobstar while",t,h,e,m,g),this.matchOne(t.slice(h),e.slice(m),r))return this.debug("globstar found match!",h,c,g),!0;if(g==="."||g===".."||!o.dot&&g.charAt(0)==="."){this.debug("dot detected!",t,h,e,m);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(r&&(this.debug("\n>>> no match, partial?",t,h,e,m),h===c))}let O;if(typeof l=="string"?(O=u===l,this.debug("string match",l,u,O)):(O=l.test(u),this.debug("pattern match",l,u,O)),!O)return!1}if(i===c&&a===p)return!0;if(i===c)return r;if(a===p)return i===c-1&&t[i]==="";throw new Error("wtf?")}braceExpand(){return yt(this.pattern,this.options)}parse(t){k(t);const e=this.options;if(t==="**")return P;if(t==="")return"";let r,o=null;(r=t.match(ne))?o=e.dot?se:re:(r=t.match(Ht))?o=(e.nocase?e.dot?Jt:Ut:e.dot?Xt:Vt)(r[1]):(r=t.match(oe))?o=(e.nocase?e.dot?ae:ie:e.dot?ce:le)(r):(r=t.match(Kt))?o=e.dot?Yt:Qt:(r=t.match(te))&&(o=ee);let s="",i=!1,a=!1;const c=[],p=[];let l=!1,u=!1,h,m=t.charAt(0)===".",g=e.dot||m;const O=()=>m?"":g?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",M=f=>f.charAt(0)==="."?"":e.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=()=>{if(l){switch(l){case"*":s+=Z,i=!0;break;case"?":s+=q,i=!0;break;default:s+="\\"+l;break}this.debug("clearStateChar %j %j",l,s),l=!1}};for(let f=0,d;f<t.length&&(d=t.charAt(f));f++){if(this.debug("%s	%s %s %j",t,f,s,d),a){if(d==="/")return!1;fe[d]&&(s+="\\"),s+=d,a=!1;continue}switch(d){case"/":return!1;case"\\":b(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s	%s %s %j <-- stateChar",t,f,s,d),this.debug("call clearStateChar %j",l),b(),l=d,e.noext&&b();continue;case"(":{if(!l){s+="\\(";continue}const j={type:l,start:f-1,reStart:s.length,open:tt[l].open,close:tt[l].close};this.debug(this.pattern,"	",j),c.push(j),s+=j.open,j.start===0&&j.type!=="!"&&(m=!0,s+=M(t.slice(f+1))),this.debug("plType %j %j",l,s),l=!1;continue}case")":{const j=c[c.length-1];if(!j){s+="\\)";continue}c.pop(),b(),i=!0,h=j,s+=h.close,h.type==="!"&&p.push(Object.assign(h,{reEnd:s.length}));continue}case"|":{const j=c[c.length-1];if(!j){s+="\\|";continue}b(),s+="|",j.start===0&&j.type!=="!"&&(m=!0,s+=M(t.slice(f+1)));continue}case"[":b();const[v,R,x,$]=Dt(t,f);x?(s+=v,u=u||R,f+=x-1,i=i||$):s+="\\[";continue;case"]":s+="\\"+d;continue;default:b(),s+=nt(d);break}}for(h=c.pop();h;h=c.pop()){let f;f=s.slice(h.reStart+h.open.length),this.debug(this.pattern,"setting tail",s,h),f=f.replace(/((?:\\{2}){0,64})(\\?)\|/g,(v,R,x)=>(x||(x="\\"),R+R+x+"|")),this.debug("tail=%j\n   %s",f,f,h,s);const d=h.type==="*"?Z:h.type==="?"?q:"\\"+h.type;i=!0,s=s.slice(0,h.reStart)+d+"\\("+f}b(),a&&(s+="\\\\");const E=ge[s.charAt(0)];for(let f=p.length-1;f>-1;f--){const d=p[f],v=s.slice(0,d.reStart),R=s.slice(d.reStart,d.reEnd-8);let x=s.slice(d.reEnd);const $=s.slice(d.reEnd-8,d.reEnd)+x,j=v.split(")").length,vt=v.split("(").length-j;let G=x;for(let U=0;U<vt;U++)G=G.replace(/\)[+*?]?/,"");x=G;const Ot=x===""?"(?:$|\\/)":"";s=v+R+x+Ot+$}if(s!==""&&i&&(s="(?=.)"+s),E&&(s=O()+s),e.nocase&&!i&&!e.nocaseMagicOnly&&(i=t.toUpperCase()!==t.toLowerCase()),!i)return ve(s);const F=(e.nocase?"i":"")+(u?"u":"");try{const f=o?{_glob:t,_src:s,test:o}:{_glob:t,_src:s};return Object.assign(new RegExp("^"+s+"$",F),f)}catch(f){return this.debug("invalid regexp",f),new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,r=e.noglobstar?Z:e.dot?he:ue,o=e.nocase?"i":"";let s=t.map(i=>{const a=i.map(c=>typeof c=="string"?nt(c):c===P?P:c._src);return a.forEach((c,p)=>{const l=a[p+1],u=a[p-1];c!==P||u===P||(u===void 0?l!==void 0&&l!==P?a[p+1]="(?:\\/|"+r+"\\/)?"+l:a[p]=r:l===void 0?a[p-1]=u+"(?:\\/|"+r+")?":l!==P&&(a[p-1]=u+"(?:\\/|\\/"+r+"\\/)"+l,a[p+1]=P))}),a.filter(c=>c!==P).join("/")}).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,o)}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;const r=this.options;this.isWindows&&(t=t.split("\\").join("/"));const o=this.slashSplit(t);this.debug(this.pattern,"split",o);const s=this.set;this.debug(this.pattern,"set",s);let i=o[o.length-1];if(!i)for(let a=o.length-2;!i&&a>=0;a--)i=o[a];for(let a=0;a<s.length;a++){const c=s[a];let p=o;if(r.matchBase&&c.length===1&&(p=[i]),this.matchOne(p,c,e))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(t){return S.defaults(t).Minimatch}}S.Minimatch=I,S.escape=Zt,S.unescape=qt;function Oe(n){const t={};for(const e of n.keys())t[e]=n.get(e);return t}function je(n,t,e=!1){return e?{data:t,headers:n.headers?Oe(n.headers):{},status:n.status,statusText:n.statusText}:t}var xe=At,C=function(n){return typeof n=="string"};function rt(n,t){for(var e=[],r=0;r<n.length;r++){var o=n[r];!o||o==="."||(o===".."?e.length&&e[e.length-1]!==".."?e.pop():t&&e.push(".."):e.push(o))}return e}var Se=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,w={};function N(n){return Se.exec(n).slice(1)}w.resolve=function(){for(var n="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var r=e>=0?arguments[e]:T.cwd();if(C(r)){if(!r)continue}else throw new TypeError("Arguments to path.resolve must be strings");n=r+"/"+n,t=r.charAt(0)==="/"}return n=rt(n.split("/"),!t).join("/"),(t?"/":"")+n||"."},w.normalize=function(n){var t=w.isAbsolute(n),e=n.substr(-1)==="/";return n=rt(n.split("/"),!t).join("/"),!n&&!t&&(n="."),n&&e&&(n+="/"),(t?"/":"")+n},w.isAbsolute=function(n){return n.charAt(0)==="/"},w.join=function(){for(var n="",t=0;t<arguments.length;t++){var e=arguments[t];if(!C(e))throw new TypeError("Arguments to path.join must be strings");e&&(n?n+="/"+e:n+=e)}return w.normalize(n)},w.relative=function(n,t){n=w.resolve(n).substr(1),t=w.resolve(t).substr(1);function e(p){for(var l=0;l<p.length&&p[l]==="";l++);for(var u=p.length-1;u>=0&&p[u]==="";u--);return l>u?[]:p.slice(l,u+1)}for(var r=e(n.split("/")),o=e(t.split("/")),s=Math.min(r.length,o.length),i=s,a=0;a<s;a++)if(r[a]!==o[a]){i=a;break}for(var c=[],a=i;a<r.length;a++)c.push("..");return c=c.concat(o.slice(i)),c.join("/")},w._makeLong=function(n){return n},w.dirname=function(n){var t=N(n),e=t[0],r=t[1];return!e&&!r?".":(r&&(r=r.substr(0,r.length-1)),e+r)},w.basename=function(n,t){var e=N(n)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},w.extname=function(n){return N(n)[3]},w.format=function(n){if(!xe.isObject(n))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof n);var t=n.root||"";if(!C(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof n.root);var e=n.dir?n.dir+w.sep:"",r=n.base||"";return e+r},w.parse=function(n){if(!C(n))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof n);var t=N(n);if(!t||t.length!==4)throw new TypeError("Invalid path '"+n+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,t[1].length-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},w.sep="/",w.delimiter=":";var Ee=w;const Pe=ot(Ee);function H(n){var t=typeof Map=="function"?new Map:void 0;return H=function(e){if(e===null||!Me(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _(e,arguments,V(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),z(r,e)},H(n)}function _(n,t,e){return $e()?_=Reflect.construct:_=function(r,o,s){var i=[null];i.push.apply(i,o);var a=Function.bind.apply(r,i),c=new a;return s&&z(c,s.prototype),c},_.apply(null,arguments)}function $e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Me(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function z(n,t){return z=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},z(n,t)}function V(n){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},V(n)}H(Error);var st;(function(n){n.Array="array",n.Object="object",n.Original="original"})(st||(st={}));function Ae(n,t,e=!1){const{getlastmodified:r=null,getcontentlength:o="0",resourcetype:s=null,getcontenttype:i=null,getetag:a=null}=n,c=s&&typeof s=="object"&&typeof s.collection<"u"?"directory":"file",p={filename:t,basename:Pe.basename(t),lastmod:r,size:parseInt(o,10),type:c,etag:typeof a=="string"?a.replace(/"/g,""):null};return c==="file"&&(p.mime=i&&typeof i=="string"?i.split(";")[0]:""),e&&(p.props=n),p}const Re=20,ke=async function({resourceType:n,resourceId:t},e){var r;const o=["",n,t].join("/"),s=e.datetime?"<oc:datetime>".concat(e.datetime.toISOString(),"</oc:datetime>"):"",i=await it.customRequest(o,Object.assign({method:"REPORT",data:'<?xml version="1.0"?>\n			<oc:filter-comments\n				xmlns:d="DAV:"\n				xmlns:oc="http://owncloud.org/ns"\n				xmlns:nc="http://nextcloud.org/ns"\n				xmlns:ocs="http://open-collaboration-services.org/ns">\n				<oc:limit>'.concat((r=e.limit)!=null?r:Re,"</oc:limit>\n				<oc:offset>").concat(e.offset||0,"</oc:offset>\n				").concat(s,"\n			</oc:filter-comments>")},e)),a=await i.text(),c=await Et(a),p=Le(c,!0);return je(i,p,!0)},Le=function(n,t=!1){const{multistatus:{response:e}}=n;return e.map(r=>{const o=r.propstat.prop;return Ae(o,o.id.toString(),t)})};export{Re as D,Rt as a,it as c,ke as g};
